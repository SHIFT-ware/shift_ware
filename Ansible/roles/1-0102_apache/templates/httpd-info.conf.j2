#
# Get information about the requests being processed by the server
# and the configuration of the server.
#
# Required modules: mod_authz_core, mod_authz_host,
#                   mod_info (for the server-info handler),
#                   mod_status (for the server-status handler)

#
# Allow server status reports generated by mod_status,
# with the URL of http://servername/server-status
# Change the ".example.com" to match your domain to enable.

<Location /server-status>
    SetHandler server-status
#    Require host .example.com
{% if apac_apache.visible_server_status is undefined or apac_apache.visible_server_status == false %}
    Require ip 127
{% else %}
{% if apac_apache.accessible_addresses.0.address == "0.0.0.0" %}
    Require all granted
{% else %} 
{% for address in apac_apache.accessible_addresses %}
    Require ip {{ address.address }}
{% endfor %}
{% endif %}
{% endif %}
</Location>

#
# ExtendedStatus controls whether Apache will generate "full" status
# information (ExtendedStatus On) or just basic information (ExtendedStatus
# Off) when the "server-status" handler is called. The default is Off.
#
#ExtendedStatus On
ExtendedStatus On

#
# Allow remote server configuration reports, with the URL of
#  http://servername/server-info (requires that mod_info.c be loaded).
# Change the ".example.com" to match your domain to enable.
#
<Location /server-info>
    SetHandler server-info
#    Require host .example.com
{% if apac_apache.visible_server_info is undefined or apac_apache.visible_server_info == false %}
    Require ip 127
{% else %}
{% if apac_apache.accessible_addresses.0.address == "0.0.0.0" %}
    Require all granted
{% else %} 
{% for address in apac_apache.accessible_addresses %}
    Require ip {{ address.address }}
{% endfor %}
{% endif %}
{% endif %}
</Location>

